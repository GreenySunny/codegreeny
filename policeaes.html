<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>GÃ©nÃ©rateur aesthetic & BBCode</title>
  <style>
    body {
      background: #111;
      color: #eee;
      font-family: sans-serif;
      padding: 40px;
      margin: auto;
      max-width: 1200px;
      box-sizing: border-box;
    }
    h1 {
      margin-bottom: 30px;
      text-align: center;
    }
    .container {
      display: flex;
      gap: 30px;
      flex-wrap: wrap;
      justify-content: center;
    }
    .column {
      background: #222;
      border-radius: 10px;
      padding: 20px;
      flex: 1 1 400px;
      box-sizing: border-box;
      min-width: 320px;
      max-width: 600px;
    }
    textarea, input[type="color"] {
      width: 100%;
      font-size: 1.2em;
      margin-bottom: 20px;
      background: #333;
      color: #fff;
      border: none;
      padding: 15px;
      border-radius: 6px;
      box-sizing: border-box;
      resize: vertical;
      min-height: 80px;
    }
    label {
      display: inline-flex;
      align-items: center;
      margin-right: 15px;
      font-size: 1em;
      cursor: pointer;
      user-select: none;
    }
    input[type="checkbox"] {
      margin-right: 6px;
      cursor: pointer;
    }
    .options {
      margin-bottom: 20px;
    }
    .style-block {
      margin-bottom: 20px;
      background: #333;
      border-radius: 8px;
      padding: 15px;
    }
    .style-block h2 {
      color: #ff9;
      margin-bottom: 8px;
      font-size: 1.05em;
    }
    .output {
      font-size: 1.1em;
      word-break: break-word;
      margin-bottom: 10px;
      user-select: all;
      background: #222;
      padding: 10px;
      border-radius: 6px;
      white-space: pre-wrap;
      font-family: monospace, monospace;
      min-height: 60px;
    }
    button {
      background: #555;
      color: #fff;
      border: none;
      padding: 7px 12px;
      border-radius: 5px;
      cursor: pointer;
      font-size: 0.9em;
      display: flex;
      align-items: center;
      gap: 6px;
      user-select: none;
      transition: background 0.3s;
    }
    button:hover {
      background: #777;
    }
    button .icon {
      font-size: 1.2em;
      line-height: 1;
    }
    /* Responsive */
    @media (max-width: 900px) {
      .container {
        flex-direction: column;
      }
      .column {
        max-width: 100%;
      }
    }
  </style>
</head>
<body>

  <h1>GÃ©nÃ©rateur aesthetic & BBCode</h1>

  <div class="container">
    <!-- Colonne gauche: aesthetic -->
    <div class="column" id="left-column">
      <h2>GÃ©nÃ©rateur aesthetic</h2>
      <textarea id="inputAesthetic">texte ici</textarea>
      <div id="resultsAesthetic"></div>
    </div>

    <!-- Colonne droite: gÃ©nÃ©rateur BBCode -->
    <div class="column" id="right-column">
      <h2>GÃ©nÃ©rateur BBCode simple</h2>
      <textarea id="inputBBCode" placeholder="Tape ton texte ici...">texte ici</textarea>
      <div class="options">
        <label><input type="checkbox" id="bold"> Gras</label>
        <label><input type="checkbox" id="italic"> Italique</label>
        <label><input type="checkbox" id="underline"> SoulignÃ©</label>
        <label>Couleur : <input type="color" id="color" value="#ffcc00"></label>
      </div>
      <div class="style-block">
        <div class="output" id="outputBBCode"></div>
        <button id="btnBBCode">
          <span class="icon">ðŸ“‹</span> Copier
        </button>
      </div>
    </div>
  </div>

  <script>
    // === GÃ©nÃ©rateur aesthetic (gauche) ===
    const inputAesthetic = document.getElementById('inputAesthetic');
    const resultsAesthetic = document.getElementById('resultsAesthetic');

    const styles = [
      {
        name: "Option 1 : Fullwidth + espace fullwidth entre mots",
        transform: (text) => toFullwidthSpacedBetweenWords(text, 'ã€€')
      },
      {
        name: "Option 2 : Fullwidth + espace normal entre mots",
        transform: (text) => toFullwidthSpacedBetweenWords(text, ' ')
      },
      {
        name: "Option 3 : Texte fullwidth encadrÃ© ã€ï»¿ ã€‘",
        transform: (text) => `ã€\uFEFF ${toFullwidth(text)} ã€‘`
      },
      {
        name: "Option 4 : ã€lettresã€‘ encadrÃ©es",
        transform: toBoxed
      },
      {
        name: "Option 5 : SoulignÃ© (aÌ²eÌ²sÌ²...)",
        transform: toUnderline
      },
      {
        name: "Option 6 : Double soulignÃ© (aÍŸeÍŸsÍŸ...)",
        transform: toDoubleUnderline
      },
      {
        name: "Option 7 : Petites majuscules espacÃ©es",
        transform: toSmalls
      }
    ];

    function toFullwidth(str) {
      return str.split('').map(c => {
        const code = c.charCodeAt(0);
        if (c === ' ') return 'ã€€';
        if (code >= 33 && code <= 126) {
          return String.fromCharCode(code + 65248);
        }
        return c;
      }).join('');
    }

    function toFullwidthSpacedBetweenWords(str, spaceChar = ' ') {
      return str.split(' ').map(word => toFullwidth(word)).join(spaceChar);
    }

    function toBoxed(str) {
      return str.split('').map(c => (c === ' ') ? ' ' : `ã€${c}ã€‘`).join('');
    }

    function toUnderline(str) {
      return str.split('').map(c => c + '\u0332').join('');
    }

    function toDoubleUnderline(str) {
      return str.split('').map(c => c + '\u035F').join('');
    }

    function toSmalls(str) {
      const map = {
        a: 'á´€', b: 'Ê™', c: 'á´„', d: 'á´…', e: 'á´‡', f: 'Ò“', g: 'É¢', h: 'Êœ', i: 'Éª', j: 'á´Š',
        k: 'á´‹', l: 'ÊŸ', m: 'á´', n: 'É´', o: 'á´', p: 'á´˜', q: 'Ç«', r: 'Ê€', s: 's', t: 'á´›',
        u: 'á´œ', v: 'á´ ', w: 'á´¡', x: 'x', y: 'Ê', z: 'á´¢',
        A: 'á´€', B: 'Ê™', C: 'á´„', D: 'á´…', E: 'á´‡', F: 'Ò“', G: 'É¢', H: 'Êœ', I: 'Éª', J: 'á´Š',
        K: 'á´‹', L: 'ÊŸ', M: 'á´', N: 'É´', O: 'á´', P: 'á´˜', Q: 'Ç«', R: 'Ê€', S: 's', T: 'á´›',
        U: 'á´œ', V: 'á´ ', W: 'á´¡', X: 'x', Y: 'Ê', Z: 'á´¢',
        ' ': ' '
      };
      return str.split('').map(c => map[c] || c).join(' ');
    }

    function renderAesthetic() {
      const text = inputAesthetic.value;
      resultsAesthetic.innerHTML = '';

      styles.forEach((styleObj, index) => {
        const transformed = styleObj.transform(text);
        const block = document.createElement('div');
        block.className = 'style-block';

        block.innerHTML = `
          <h2>${styleObj.name}</h2>
          <div class="output" id="output-${index}">${transformed}</div>
          <button id="btn-${index}" aria-label="Copier le texte">
            <span class="icon">ðŸ“‹</span> Copier
          </button>
        `;

        resultsAesthetic.appendChild(block);

        const btn = document.getElementById(`btn-${index}`);
        btn.addEventListener('click', () => {
          copyToClipboard(`output-${index}`, btn);
        });
      });
    }

    // === GÃ©nÃ©rateur BBCode (droite) ===
    const inputBBCode = document.getElementById('inputBBCode');
    const outputBBCode = document.getElementById('outputBBCode');
    const btnBBCode = document.getElementById('btnBBCode');
    const cbBold = document.getElementById('bold');
    const cbItalic = document.getElementById('italic');
    const cbUnderline = document.getElementById('underline');
    const colorInput = document.getElementById('color');

    function generateBBCode() {
      let text = inputBBCode.value;

      // Ã‰chapper [ ] Ã©ventuels dans le texte pour Ã©viter erreurs (optionnel)
      text = text.replace(/\[/g, '\\[').replace(/\]/g, '\\]');

      if (cbBold.checked) text = `[b]${text}[/b]`;
      if (cbItalic.checked) text = `[i]${text}[/i]`;
      if (cbUnderline.checked) text = `[u]${text}[/u]`;
      if (colorInput.value) text = `[color=${colorInput.value}]${text}[/color]`;

      outputBBCode.textContent = text;
    }

    btnBBCode.addEventListener('click', () => {
      navigator.clipboard.writeText(outputBBCode.textContent).then(() => {
        const icon = btnBBCode.querySelector('.icon');
        icon.textContent = 'âœ…';
        btnBBCode.disabled = true;
        setTimeout(() => {
          icon.textContent = 'ðŸ“‹';
          btnBBCode.disabled = false;
        }, 2000);
      });
    });

    inputBBCode.addEventListener('input', generateBBCode);
    cbBold.addEventListener('change', generateBBCode);
    cbItalic.addEventListener('change', generateBBCode);
    cbUnderline.addEventListener('change', generateBBCode);
    colorInput.addEventListener('input', generateBBCode);

    window.copyToClipboard = (id, btn) => {
      const text = document.getElementById(id).innerText;
      navigator.clipboard.writeText(text).then(() => {
        const icon = btn.querySelector('.icon');
        icon.textContent = 'âœ…';
        btn.disabled = true;
        setTimeout(() => {
          icon.textContent = 'ðŸ“‹';
          btn.disabled = false;
        }, 2000);
      });
    };

    // Initial render
    window.onload = () => {
      renderAesthetic();
      generateBBCode();
    };
  </script>
</body>
</html>
